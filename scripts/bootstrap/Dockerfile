FROM ubuntu:20.04

LABEL maintainer.0="CIBR-QCRI Team"

ARG GREENPLUM_HOST=10.4.8.131
ARG GREENPLUM_SERVICE_PORT=5432
ARG GREENPLUM_USERNAME=gpadmin
ARG GREENPLUM_DB=eth_blockchain

ENV PYTHONUNBUFFERED=1
ENV GREENPLUM_HOST=$GREENPLUM_HOST
ENV GREENPLUM_SERVICE_PORT=$GREENPLUM_PORT
ENV GREENPLUM_USERNAME=$GREENPLUM_USERNAME
ENV GREENPLUM_PASSWORD=$GREENPLUM_PASSWORD
ENV GREENPLUM_DB=$GREENPLUM_DB

COPY bootstrap.sh /bootstrap.sh
COPY dependencies/eth_blockchain_schema.sql /eth_blockchain_schema.sql

RUN chmod 755 /bootstrap.sh
RUN chmod 755 /eth_blockchain_schema.sql

EXPOSE 5432 8529 30872

ENTRYPOINT ["/bootstrap.sh"]
